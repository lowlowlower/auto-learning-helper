<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>æ’ä»¶è°ƒè¯•å·¥å…·</title>
  <style>
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Microsoft YaHei", sans-serif;
      padding: 20px;
      background: #f5f5f5;
      max-width: 1200px;
      margin: 0 auto;
    }
    .header {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 30px;
      border-radius: 12px;
      margin-bottom: 20px;
    }
    h1 {
      margin: 0 0 10px 0;
    }
    .card {
      background: white;
      padding: 25px;
      border-radius: 8px;
      margin-bottom: 20px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    .card h2 {
      margin-top: 0;
      color: #667eea;
    }
    button {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border: none;
      padding: 12px 24px;
      border-radius: 6px;
      font-size: 14px;
      cursor: pointer;
      margin: 5px;
      transition: transform 0.2s;
    }
    button:hover {
      transform: translateY(-2px);
    }
    .result {
      background: #f8f9fa;
      border: 1px solid #e9ecef;
      border-radius: 4px;
      padding: 15px;
      margin-top: 15px;
      font-family: 'Courier New', monospace;
      font-size: 13px;
      max-height: 400px;
      overflow-y: auto;
    }
    .success {
      color: #28a745;
      font-weight: bold;
    }
    .error {
      color: #dc3545;
      font-weight: bold;
    }
    .warning {
      color: #ffc107;
      font-weight: bold;
    }
    .info {
      color: #17a2b8;
    }
    pre {
      white-space: pre-wrap;
      word-break: break-word;
    }
    .step {
      background: #e7f3ff;
      padding: 15px;
      border-left: 4px solid #667eea;
      margin: 15px 0;
      border-radius: 4px;
    }
    .step-number {
      display: inline-block;
      background: #667eea;
      color: white;
      width: 30px;
      height: 30px;
      border-radius: 50%;
      text-align: center;
      line-height: 30px;
      margin-right: 10px;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <div class="header">
    <h1>ğŸ”§ æ’ä»¶è°ƒè¯•å·¥å…·</h1>
    <p>å¸®åŠ©æ‚¨æµ‹è¯•å’Œè°ƒè¯•è‡ªåŠ¨å­¦ä¹ åŠ©æ‰‹æ’ä»¶</p>
  </div>

  <div class="card">
    <h2>ğŸ“‹ ä½¿ç”¨è¯´æ˜</h2>
    <div class="step">
      <span class="step-number">1</span>
      <strong>æ‰“å¼€å­¦ä¹ å¹³å°é¡µé¢</strong><br>
      åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€æ‚¨çš„å­¦ä¹ å¹³å°ç½‘ç«™
    </div>
    <div class="step">
      <span class="step-number">2</span>
      <strong>æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·</strong><br>
      æŒ‰ <code>F12</code> é”®æ‰“å¼€å¼€å‘è€…å·¥å…·
    </div>
    <div class="step">
      <span class="step-number">3</span>
      <strong>åˆ‡æ¢åˆ° Console æ ‡ç­¾</strong><br>
      åœ¨å¼€å‘è€…å·¥å…·ä¸­æ‰¾åˆ° Consoleï¼ˆæ§åˆ¶å°ï¼‰æ ‡ç­¾
    </div>
    <div class="step">
      <span class="step-number">4</span>
      <strong>å¤åˆ¶ä¸‹æ–¹ä»£ç å¹¶ç²˜è´´åˆ° Console</strong><br>
      ç‚¹å‡»ä¸‹æ–¹æŒ‰é’®å¤åˆ¶ä»£ç ï¼Œç„¶åç²˜è´´åˆ° Console ä¸­æŒ‰å›è½¦è¿è¡Œ
    </div>
  </div>

  <div class="card">
    <h2>ğŸ” æ£€æµ‹è¯¾ç¨‹å¡ç‰‡</h2>
    <p>è¿™æ®µä»£ç ä¼šå¸®æ‚¨æ£€æµ‹é¡µé¢ä¸Šçš„è¯¾ç¨‹å…ƒç´ ï¼Œå¹¶æ˜¾ç¤ºè¯¦ç»†ä¿¡æ¯</p>
    <button onclick="copyCode('detectCards')">ğŸ“‹ å¤åˆ¶ä»£ç </button>
    <button onclick="testLocally('detectCards')">ğŸ§ª æœ¬åœ°æµ‹è¯•</button>
    <div class="result" id="detectCards-result" style="display:none;"></div>
    <pre id="detectCards" style="display:none;">
// ========== è¯¾ç¨‹å¡ç‰‡æ£€æµ‹å·¥å…· ==========
console.log('%cğŸ” å¼€å§‹æ£€æµ‹è¯¾ç¨‹å¡ç‰‡...', 'color: #667eea; font-size: 16px; font-weight: bold;');

// å®šä¹‰é€‰æ‹©å™¨
const selectors = [
  '.item.hover-shadow',
  '.item',
  '.course-card',
  '.course-item',
  '.video-item',
  '.lesson-item',
  '[class*="course"]',
  '[class*="card"]'
];

let found = false;

selectors.forEach(selector => {
  const elements = document.querySelectorAll(selector);
  if (elements.length > 0) {
    console.log(`%câœ… æ‰¾åˆ° ${elements.length} ä¸ªå…ƒç´ ä½¿ç”¨é€‰æ‹©å™¨: ${selector}`, 'color: green; font-weight: bold;');
    
    // æ£€æŸ¥ç¬¬ä¸€ä¸ªå…ƒç´ çš„ç‰¹å¾
    const first = elements[0];
    console.log('ç¬¬ä¸€ä¸ªå…ƒç´ çš„è¯¦ç»†ä¿¡æ¯ï¼š');
    console.log('- æ ‡ç­¾å:', first.tagName);
    console.log('- ç±»å:', first.className);
    console.log('- æ˜¯å¦æœ‰å›¾ç‰‡:', !!first.querySelector('img'));
    console.log('- æ˜¯å¦æœ‰ .cover:', !!first.querySelector('.cover'));
    console.log('- æ˜¯å¦æœ‰ .info-box:', !!first.querySelector('.info-box'));
    console.log('- æ˜¯å¦æœ‰ .speaker:', !!first.querySelector('.speaker'));
    console.log('- æ˜¯å¦æœ‰ .progress:', !!first.querySelector('.progress'));
    console.log('- æ–‡æœ¬å†…å®¹å‰50å­—ç¬¦:', first.textContent.trim().substring(0, 50));
    
    // é«˜äº®æ˜¾ç¤ºæ‰¾åˆ°çš„å…ƒç´ 
    elements.forEach((el, index) => {
      el.style.outline = '3px solid red';
      el.style.outlineOffset = '2px';
      setTimeout(() => {
        el.style.outline = '';
      }, 5000);
    });
    
    console.log('%cğŸ’¡ å·²ç”¨çº¢è‰²è¾¹æ¡†é«˜äº®æ˜¾ç¤ºæ‰¾åˆ°çš„å…ƒç´ ï¼ˆ5ç§’åæ¶ˆå¤±ï¼‰', 'color: orange;');
    found = true;
  }
});

if (!found) {
  console.log('%câŒ æœªæ‰¾åˆ°ä»»ä½•è¯¾ç¨‹å¡ç‰‡å…ƒç´ ', 'color: red; font-weight: bold;');
  console.log('è¯·æ‰‹åŠ¨æŸ¥çœ‹é¡µé¢ç»“æ„ï¼Œå¹¶æä¾›è¯¾ç¨‹å¡ç‰‡çš„HTMLä»£ç ');
}

console.log('%câœ¨ æ£€æµ‹å®Œæˆï¼', 'color: #667eea; font-size: 16px; font-weight: bold;');
    </pre>
  </div>

  <div class="card">
    <h2>ğŸ¥ æ£€æµ‹è§†é¢‘å…ƒç´ </h2>
    <p>æ£€æµ‹é¡µé¢ä¸Šçš„è§†é¢‘æ’­æ”¾å™¨</p>
    <button onclick="copyCode('detectVideo')">ğŸ“‹ å¤åˆ¶ä»£ç </button>
    <button onclick="testLocally('detectVideo')">ğŸ§ª æœ¬åœ°æµ‹è¯•</button>
    <div class="result" id="detectVideo-result" style="display:none;"></div>
    <pre id="detectVideo" style="display:none;">
// ========== è§†é¢‘å…ƒç´ æ£€æµ‹å·¥å…· ==========
console.log('%cğŸ¥ å¼€å§‹æ£€æµ‹è§†é¢‘å…ƒç´ ...', 'color: #667eea; font-size: 16px; font-weight: bold;');

const videos = document.querySelectorAll('video');

if (videos.length > 0) {
  console.log(`%câœ… æ‰¾åˆ° ${videos.length} ä¸ªè§†é¢‘å…ƒç´ `, 'color: green; font-weight: bold;');
  
  videos.forEach((video, index) => {
    console.log(`\nè§†é¢‘ ${index + 1}:`);
    console.log('- å®½åº¦:', video.videoWidth);
    console.log('- é«˜åº¦:', video.videoHeight);
    console.log('- å½“å‰æ—¶é—´:', video.currentTime, 'ç§’');
    console.log('- æ€»æ—¶é•¿:', video.duration, 'ç§’');
    console.log('- æ˜¯å¦æš‚åœ:', video.paused);
    console.log('- æ˜¯å¦ç»“æŸ:', video.ended);
    console.log('- æ’­æ”¾é€Ÿåº¦:', video.playbackRate);
    console.log('- è§†é¢‘æº:', video.src || video.currentSrc);
    
    // é«˜äº®è§†é¢‘å…ƒç´ 
    video.style.outline = '3px solid blue';
    setTimeout(() => {
      video.style.outline = '';
    }, 5000);
  });
  
  console.log('%cğŸ’¡ å·²ç”¨è“è‰²è¾¹æ¡†é«˜äº®æ˜¾ç¤ºè§†é¢‘ï¼ˆ5ç§’åæ¶ˆå¤±ï¼‰', 'color: orange;');
} else {
  console.log('%câŒ å½“å‰é¡µé¢æ²¡æœ‰è§†é¢‘å…ƒç´ ', 'color: red; font-weight: bold;');
  console.log('è¯·æ‰“å¼€ä¸€ä¸ªåŒ…å«è§†é¢‘çš„è¯¾ç¨‹é¡µé¢å†è¯•');
}

console.log('%câœ¨ æ£€æµ‹å®Œæˆï¼', 'color: #667eea; font-size: 16px; font-weight: bold;');
    </pre>
  </div>

  <div class="card">
    <h2>ğŸ”„ æ¨¡æ‹Ÿè‡ªåŠ¨åŒ–æµç¨‹</h2>
    <p>æ¨¡æ‹Ÿæ’ä»¶çš„è‡ªåŠ¨åŒ–è¡Œä¸ºï¼Œçœ‹çœ‹èƒ½å¦æ­£ç¡®è¯†åˆ«å’Œç‚¹å‡»è¯¾ç¨‹</p>
    <button onclick="copyCode('simulate')">ğŸ“‹ å¤åˆ¶ä»£ç </button>
    <button onclick="testLocally('simulate')">ğŸ§ª æœ¬åœ°æµ‹è¯•</button>
    <div class="result" id="simulate-result" style="display:none;"></div>
    <pre id="simulate" style="display:none;">
// ========== è‡ªåŠ¨åŒ–æµç¨‹æ¨¡æ‹Ÿå·¥å…· ==========
console.log('%cğŸ”„ å¼€å§‹æ¨¡æ‹Ÿè‡ªåŠ¨åŒ–æµç¨‹...', 'color: #667eea; font-size: 16px; font-weight: bold;');

// æ£€æµ‹è¯¾ç¨‹å¡ç‰‡
function detectCourseCards() {
  const selectors = [
    '.item.hover-shadow',
    '.item',
    '.course-card',
    '.course-item'
  ];
  
  for (const selector of selectors) {
    const cards = document.querySelectorAll(selector);
    if (cards.length > 0) {
      const validCards = Array.from(cards).filter(card => {
        const hasImage = card.querySelector('img');
        const hasCover = card.querySelector('.cover');
        const hasInfoBox = card.querySelector('.info-box');
        const hasSpeaker = card.querySelector('.speaker');
        return hasImage || hasCover || hasInfoBox || hasSpeaker;
      });
      
      if (validCards.length > 0) {
        console.log(`%câœ… ä½¿ç”¨é€‰æ‹©å™¨ "${selector}" æ‰¾åˆ° ${validCards.length} ä¸ªæœ‰æ•ˆè¯¾ç¨‹`, 'color: green;');
        return validCards;
      }
    }
  }
  return null;
}

// è·å–è¯¾ç¨‹æ ‡é¢˜
function getCourseTitle(card) {
  const speakerEl = card.querySelector('.speaker .c-text');
  if (speakerEl) return speakerEl.textContent.trim();
  
  const img = card.querySelector('img');
  if (img && img.src) {
    const urlParts = img.src.split('/');
    return urlParts[urlParts.length - 1];
  }
  
  return card.textContent.trim().substring(0, 30);
}

// æ‰§è¡Œæ£€æµ‹
const cards = detectCourseCards();

if (cards && cards.length > 0) {
  console.log(`\n%cğŸ“š æ‰¾åˆ° ${cards.length} ä¸ªè¯¾ç¨‹ï¼š`, 'color: blue; font-weight: bold;');
  
  cards.forEach((card, index) => {
    const title = getCourseTitle(card);
    console.log(`${index + 1}. ${title}`);
    
    // é«˜äº®æ˜¾ç¤º
    card.style.outline = '3px solid green';
    card.style.outlineOffset = '2px';
    
    // æ·»åŠ åºå·æ ‡ç­¾
    const label = document.createElement('div');
    label.textContent = index + 1;
    label.style.position = 'absolute';
    label.style.top = '10px';
    label.style.left = '10px';
    label.style.background = 'red';
    label.style.color = 'white';
    label.style.width = '30px';
    label.style.height = '30px';
    label.style.borderRadius = '50%';
    label.style.display = 'flex';
    label.style.alignItems = 'center';
    label.style.justifyContent = 'center';
    label.style.fontWeight = 'bold';
    label.style.zIndex = '9999';
    
    card.style.position = 'relative';
    card.appendChild(label);
    
    setTimeout(() => {
      card.style.outline = '';
      if (label.parentNode) {
        label.remove();
      }
    }, 10000);
  });
  
  console.log('\n%cğŸ’¡ è¯¾ç¨‹å·²ç”¨ç»¿è‰²è¾¹æ¡†å’Œåºå·æ ‡è®°ï¼ˆ10ç§’åæ¶ˆå¤±ï¼‰', 'color: orange;');
  console.log('%câœ… æ’ä»¶åº”è¯¥èƒ½å¤Ÿæ­£ç¡®è¯†åˆ«è¿™äº›è¯¾ç¨‹ï¼', 'color: green; font-weight: bold;');
  
  // æµ‹è¯•ç‚¹å‡»ç¬¬ä¸€ä¸ªè¯¾ç¨‹
  console.log('\n%cğŸ–±ï¸ å¦‚æœè¦æµ‹è¯•ç‚¹å‡»ç¬¬ä¸€ä¸ªè¯¾ç¨‹ï¼Œè¯·åœ¨5ç§’å†…æŒ‰ Ctrl+C å–æ¶ˆï¼Œå¦åˆ™å°†è‡ªåŠ¨ç‚¹å‡»', 'color: red; font-weight: bold;');
  
  let countdown = 5;
  const timer = setInterval(() => {
    console.log(`${countdown}...`);
    countdown--;
    if (countdown < 0) {
      clearInterval(timer);
      console.log('%câš ï¸ å³å°†ç‚¹å‡»ç¬¬ä¸€ä¸ªè¯¾ç¨‹...', 'color: orange; font-weight: bold;');
      cards[0].click();
      console.log('%câœ… å·²ç‚¹å‡»ç¬¬ä¸€ä¸ªè¯¾ç¨‹ï¼', 'color: green; font-weight: bold;');
    }
  }, 1000);
  
} else {
  console.log('%câŒ æœªæ‰¾åˆ°è¯¾ç¨‹å¡ç‰‡', 'color: red; font-weight: bold;');
  console.log('è¯·æ£€æŸ¥é¡µé¢ç»“æ„æˆ–æä¾›æ›´å¤šä¿¡æ¯');
}

console.log('%câœ¨ æ¨¡æ‹Ÿå®Œæˆï¼', 'color: #667eea; font-size: 16px; font-weight: bold;');
    </pre>
  </div>

  <div class="card">
    <h2>ğŸ“Š æ’ä»¶çŠ¶æ€æ£€æŸ¥</h2>
    <p>æ£€æŸ¥æ’ä»¶æ˜¯å¦æ­£ç¡®å®‰è£…å’ŒåŠ è½½</p>
    <button onclick="copyCode('checkPlugin')">ğŸ“‹ å¤åˆ¶ä»£ç </button>
    <button onclick="testLocally('checkPlugin')">ğŸ§ª æœ¬åœ°æµ‹è¯•</button>
    <div class="result" id="checkPlugin-result" style="display:none;"></div>
    <pre id="checkPlugin" style="display:none;">
// ========== æ’ä»¶çŠ¶æ€æ£€æŸ¥å·¥å…· ==========
console.log('%cğŸ“Š å¼€å§‹æ£€æŸ¥æ’ä»¶çŠ¶æ€...', 'color: #667eea; font-size: 16px; font-weight: bold;');

// æ£€æŸ¥ Chrome API
if (typeof chrome !== 'undefined' && chrome.runtime) {
  console.log('%câœ… Chrome API å¯ç”¨', 'color: green;');
  console.log('- æ‰©å±•ID:', chrome.runtime.id);
} else {
  console.log('%câŒ Chrome API ä¸å¯ç”¨', 'color: red;');
  console.log('æ’ä»¶å¯èƒ½æœªæ­£ç¡®å®‰è£…æˆ–æœªåŠ è½½');
}

// æ£€æŸ¥ Storage API
if (typeof chrome !== 'undefined' && chrome.storage) {
  console.log('%câœ… Storage API å¯ç”¨', 'color: green;');
  
  chrome.storage.local.get(null, (items) => {
    console.log('\nå½“å‰å­˜å‚¨çš„æ•°æ®ï¼š');
    console.log(items);
  });
} else {
  console.log('%câŒ Storage API ä¸å¯ç”¨', 'color: red;');
}

// æ£€æŸ¥å†…å®¹è„šæœ¬æ˜¯å¦åŠ è½½
const scripts = Array.from(document.querySelectorAll('script')).map(s => s.src);
console.log('\né¡µé¢åŠ è½½çš„è„šæœ¬ï¼š');
console.log(scripts);

console.log('%câœ¨ æ£€æŸ¥å®Œæˆï¼', 'color: #667eea; font-size: 16px; font-weight: bold;');
    </pre>
  </div>

  <div class="card">
    <h2>ğŸ’¡ å¸¸è§é—®é¢˜</h2>
    <ul>
      <li><strong>æ‰¾ä¸åˆ°è¯¾ç¨‹å…ƒç´ ï¼Ÿ</strong> å¯èƒ½é¡µé¢è¿˜æ²¡åŠ è½½å®Œæˆï¼Œç­‰å¾…å‡ ç§’åé‡è¯•</li>
      <li><strong>é«˜äº®æ˜¾ç¤ºä¸æ­£ç¡®ï¼Ÿ</strong> è¯´æ˜é€‰æ‹©å™¨éœ€è¦è°ƒæ•´ï¼Œè¯·æä¾›é¡µé¢HTMLç»“æ„</li>
      <li><strong>ç‚¹å‡»åæ²¡ååº”ï¼Ÿ</strong> æ£€æŸ¥å…ƒç´ æ˜¯å¦å¯ç‚¹å‡»ï¼Œæˆ–è€…æ˜¯å¦éœ€è¦ç‚¹å‡»å†…éƒ¨çš„é“¾æ¥</li>
      <li><strong>æ’ä»¶æ²¡åŠ è½½ï¼Ÿ</strong> åˆ·æ–°é¡µé¢ï¼Œç¡®ä¿æ’ä»¶å·²å¯ç”¨</li>
    </ul>
  </div>

  <script>
    function copyCode(id) {
      const code = document.getElementById(id).textContent;
      navigator.clipboard.writeText(code).then(() => {
        alert('âœ… ä»£ç å·²å¤åˆ¶åˆ°å‰ªè´´æ¿ï¼\n\nè¯·ï¼š\n1. æ‰“å¼€å­¦ä¹ å¹³å°é¡µé¢\n2. æŒ‰F12æ‰“å¼€å¼€å‘è€…å·¥å…·\n3. åˆ‡æ¢åˆ°Consoleæ ‡ç­¾\n4. ç²˜è´´ä»£ç å¹¶æŒ‰å›è½¦');
      }).catch(err => {
        console.error('å¤åˆ¶å¤±è´¥:', err);
        alert('âŒ å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨å¤åˆ¶ä»£ç ');
      });
    }

    function testLocally(id) {
      const resultDiv = document.getElementById(id + '-result');
      resultDiv.style.display = 'block';
      resultDiv.innerHTML = '<span class="warning">âš ï¸ æœ¬åœ°æµ‹è¯•æ¨¡å¼</span><br><br>';
      resultDiv.innerHTML += 'è¯·æ³¨æ„ï¼šè¿™ä¸ªå·¥å…·é¡µé¢æœ¬èº«æ²¡æœ‰è¯¾ç¨‹å…ƒç´ ã€‚<br>';
      resultDiv.innerHTML += 'æ‚¨éœ€è¦åœ¨å®é™…çš„å­¦ä¹ å¹³å°é¡µé¢ä½¿ç”¨è¿™äº›ä»£ç ã€‚<br><br>';
      resultDiv.innerHTML += '<span class="info">å»ºè®®æ“ä½œï¼š</span><br>';
      resultDiv.innerHTML += '1. ç‚¹å‡»ä¸Šæ–¹"å¤åˆ¶ä»£ç "æŒ‰é’®<br>';
      resultDiv.innerHTML += '2. æ‰“å¼€æ‚¨çš„å­¦ä¹ å¹³å°ç½‘ç«™<br>';
      resultDiv.innerHTML += '3. æŒ‰F12æ‰“å¼€å¼€å‘è€…å·¥å…·<br>';
      resultDiv.innerHTML += '4. åœ¨Consoleä¸­ç²˜è´´å¹¶è¿è¡Œä»£ç ';
    }
  </script>
</body>
</html>

